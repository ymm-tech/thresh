# Thresh â€” åŸºäºJSçš„FlutteråŠ¨æ€åŒ–æ–¹æ¡ˆ

[ä¸­æ–‡ç‰ˆæ–‡æ¡£](README.md)|[English Document](https://github.com/ymm-tech/thresh/blob/main/Documentation/README_EN.md)

Threshæä¾›äº†ä¸€ä¸ªç®€å•ã€é«˜æ•ˆçš„åº”ç”¨å¼€å‘æ¡†æ¶å’Œä¸°å¯Œçš„ç»„ä»¶åŠAPIï¼Œå¸®åŠ©å¼€å‘è€…åœ¨å‰ç«¯å¼€å‘ä¸­å…·æœ‰åŸç”Ÿ APP ä½“éªŒçš„æœåŠ¡ï¼Œæ˜¯æ»¡å¸®é›†å›¢å¼€æºçš„ä¸€å¥—ç¨³å®šã€é«˜æ€§èƒ½çš„è·¨ç«¯åŠ¨æ€åŒ–æ–¹æ¡ˆã€‚

### ä¸€ã€Threshç‰¹æ€§ä¸æ•´ä½“æ¶æ„

Threshé¡¹ç›®æ¨å‡ºçš„åˆå¿ƒæ˜¯ä¸ºäº†èƒ½æä¾›ä¸€ç§åŸºäºFlutterçš„å®Œå…¨è·¨ç«¯åŠ¨æ€åŒ–æ–¹æ¡ˆï¼Œæ€§èƒ½èƒ½è¾¾åˆ°ç”šè‡³ä¼˜äºReact Nativeï¼Œå†åŠ ä¸Šå…¶å¤šç«¯æ¸²æŸ“ä¸€è‡´æ€§ä»¥åŠå³å°†æ¨å‡ºçš„Google Fuchsiaç³»ç»Ÿé»˜è®¤å¼€å‘è¯­è¨€ä¸ºFlutterï¼Œéƒ½è¡¨æ˜Threshæœªæ¥å°†ä¼šå……æ»¡æƒ³è±¡åŠ›ï¼Œä¹Ÿå°†æå¤§å¯èƒ½ä¼šæˆä¸ºæ›¿ä»£React Nativeç­‰çš„ä¸€ç§é•¿æœŸæ–¹æ¡ˆã€‚

#### 1.1ã€ ä¸»è¦ç‰¹æ€§

- **è‡ªå®šä¹‰DSL**ï¼Œæ‰©å±•æ€§å¼ºï¼Œæœªæ¥ä¼šåšåŸºäºsketchæ’ä»¶åŸå‹å›¾è‡ªåŠ¨è½¬æ¢DSL
- **å¤šç«¯ä¸€è‡´æ€§**ï¼Œæ‹¥æœ‰ç»Ÿä¸€çš„æ¸²æŸ“å¼•æ“skiaï¼Œè¾ƒå¥½çš„è·¨ç«¯å…¼å®¹æ€§é€‚é…
- **æ”¯æŒHot Reload**ï¼Œä¾¿äºå¼€å‘è°ƒè¯•ï¼Œç§’çº§ç¼–è¯‘è¿è¡Œ
- **æ”¯æŒç»„ä»¶çº§åˆ«æ›´æ–°**ï¼Œæä½³çš„ä½“éªŒæ€§
- **å•ç«¯å¼€å‘**ï¼Œé™ä½å¼€å‘æˆæœ¬

#### 1.2ã€åŠ¨æ€åŒ–å¸¸è§æ€è·¯

- **Flutterç¼–è¯‘äº§ç‰©æ›¿æ¢**

  GoogleåŸæœ¬æ‰“ç®—åœ¨2019å¹´æ¨å‡ºCode Pushæ–¹æ¡ˆï¼Œåæ¥æ”¾å¼ƒäº†ï¼Œä¸»è¦ä¸¤ä¸ªåŸå› ï¼šè¿ååº”ç”¨å•†åº—çš„è§„å®šå’Œå®‰å…¨æ–¹é¢è€ƒè™‘ï¼›ä½†ç›®å‰androidæ˜¯å¯ä»¥é€šè¿‡äº§ç‰©æ›¿æ¢æ¥åšåˆ°åŠ¨æ€åŒ–ï¼ŒiOSç«¯åˆ™æ— æ³•åšåˆ°ã€‚

- **ç»„ä»¶åŒ–æ­å»º**

  é€šè¿‡Dartæ¥å®šä¹‰éƒ¨åˆ†æ ¸å¿ƒé€šç”¨ç»„ä»¶ï¼Œåœ¨å¹³å°ä¸‹å‘å·²æœ‰çš„ç»„ä»¶åˆ—è¡¨æ‹¼è£…çš„é¡µé¢JSONï¼Œç«¯ä¸Šå†é€šè¿‡è§£ææ¸²æŸ“æˆé¡µé¢ã€‚è¿™ç§æ–¹æ¡ˆèƒ½æ»¡è¶³è½»äº¤äº’åœºæ™¯ï¼Œä½†åªèƒ½æ”¯æŒæœ‰é™åŠ¨æ€æ€§ã€‚

- **è‡ªå®šä¹‰Dartè½¬æ¢+åŠ¨æ€é€»è¾‘æ˜ å°„**

  é€šè¿‡è‡ªå®šä¹‰ä¸€å¥—Dartè§„èŒƒä»¥åŠé€šè¿‡è½¬æ¢å™¨ç”ŸæˆJSONæ¥åšåˆ°åŠ¨æ€æ›´æ–°ï¼Œæ€§èƒ½æŸå¤±å°ï¼Œä½†æ˜¯é€»è¾‘åŠ¨æ€æ€§éœ€è¦æå‰é¢„åŸ‹ï¼Œä¸”å‰ç«¯å¼€å‘åŒå­¦éœ€è¦ä¸€å®šçš„å­¦ä¹ æˆæœ¬ã€‚

- **è‡ªå®šä¹‰DSL+ä¾èµ–JSå¼•æ“çš„åŠ¨æ€æ‰§è¡Œ**

  ç±»ä¼¼äºRN/Weexï¼Œé€šè¿‡è‡ªå®šä¹‰åŠ¨æ€åŒ–UIæè¿° + JSå¼•æ“çš„è§£é‡Šè¿è¡Œè½¬æ¢æ€è·¯ï¼Œæœ€ç»ˆæ„å»ºæˆé¡µé¢å’Œæ‰§è¡ŒåŠ¨æ€é€»è¾‘ã€‚è¿™ä¸ªæ–¹æ¡ˆå¯¹äºå‰ç«¯å¼€å‘éå¸¸å‹å¥½ï¼Œé›¶å­¦ä¹ æˆæœ¬ï¼Œä½†æ˜¯ç”±äºåœ¨JSå¼•æ“è¿è¡Œï¼Œä¼šæœ‰ä¸€äº›æ€§èƒ½æŸè€—ã€‚ 


#### 1.3ã€æ–¹æ¡ˆå®ç°ä¸æ€è·¯

åœ¨åŠ¨æ€åŒ–è®¾è®¡ä¸­ï¼ŒDSL è®¾è®¡å°¤å…¶é‡è¦ï¼Œè€ƒè™‘æå¼ºçš„é€»è¾‘åŠ¨æ€æ€§ä»¥åŠå…¼å®¹åŒæ„æ–¹æ¡ˆæˆ‘ä»¬é€‰å®šJSä½œä¸ºå¼€å‘è¯­è¨€ï¼›æ ¸å¿ƒæ€è·¯æ˜¯æŠŠ Flutter çš„é¡µé¢æ¸²æŸ“é€»è¾‘ä¸­çš„ä¸‰æ£µæ ‘ä¸­çš„ç¬¬ä¸€æ£µï¼Œé€šè¿‡JS æ¥æ„é€ ã€‚è¿™å…¶ä¸­è¦å®ŒæˆJSä¸ Flutter å±‚å®ŒæˆåŸºç¡€ç»„ä»¶æ˜ å°„ï¼Œå†é€šè¿‡JSCoreå¼•æ“æ¥ç”ŸæˆUIæè¿°ï¼Œå¹¶ä¼ é€’ç»™Dartå±‚çš„ UIEngineï¼ŒUIEngine æŠŠUIæè¿°è½¬æ¢ä¸º Flutter æ§ä»¶ï¼Œæœ€ç»ˆæ¸²æŸ“æˆé¡µé¢ã€‚

  <img src="https://imagecdn.ymm56.com/ymmfile/ps-temporary/1eqpbmu2c.png" alt="image1" height="300" width="610" />

åŠ¨æ€åŒ–Flutter æ¡†æ¶ä¸»è¦ç”±è¿™ä¸‰éƒ¨åˆ†æ„æˆï¼Œæ¯ä¸€éƒ¨åˆ†éƒ½å¤„ç†ä¸åŒçš„é€»è¾‘å’Œç»‘å®šäº‹ä»¶é€šä¿¡æ¥æ›´æ–°æ¸²æŸ“é¡µé¢ã€äº‹ä»¶å“åº”ï¼Œå…¶æ ¸å¿ƒæ¸²æŸ“é€šä¿¡æµç¨‹ï¼šFlutter â‡‹ native â‡‹ js ã€‚

- **UIå±‚**

  è¿ç”¨JSå±‚å®šä¹‰äº†ä¸FlutteråŒåŠŸèƒ½çš„åŸºç¡€ç»„ä»¶ï¼Œå¹¶å¯¹Flutter WidgetTreeè¿›è¡Œæè¿°ï¼Œå†é€šè¿‡è¿™äº›ç»„ä»¶å’ŒAPIæ¥æ„é€ æˆå‰ç«¯ä¸šåŠ¡é¡µé¢ã€‚

- **Nativeå±‚**

  1ã€JSï¼ˆJSCore/V8ï¼‰å¼•æ“æ¥åŠ è½½å¹¶æ‰§è¡ŒUIå±‚åŒ…(xxxä¸šåŠ¡_js.bundle)ï¼Œæ³¨å†Œè¢«åŠ¨æ–¹æ³•æ¥è¢«JS è°ƒç”¨ï¼Œå¦‚bridgeã€äº‹ä»¶å“åº”ã€å¼‚å¸¸ä¸ŠæŠ¥ç­‰ã€‚

  2ã€ç»´æŠ¤NativeChannelå®ä¾‹ï¼Œä¸Flutterå»ºç«‹é€šé“ï¼Œä½œä¸ºJS ä¸ Flutteré€šä¿¡çš„åª’ä»‹ï¼›ä»¥åŠç»´æŠ¤UI çº¿ç¨‹ã€ä»»åŠ¡çº¿ç¨‹é˜Ÿåˆ—ã€‚

- **Flutterå±‚**

  ç»´æŠ¤JavaScriptè½¬æ¢ä¸ºDartçš„Engineï¼Œå¹¶æ”¯æŒç¼“å­˜ï¼Œå¼‚æ­¥æ›´æ–°ç»„ä»¶ï¼›äº‹ä»¶é€šä¿¡ä»¥åŠé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰ã€‚

### äºŒã€æ¥å…¥æŒ‡å—

å¦‚æœä½ è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Thresh æä¾›çš„ flutter åŠ¨æ€åŒ–èƒ½åŠ›ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ­¥éª¤å¿«é€Ÿåˆ›å»ºä¸€ä¸ªThresh é¡¹ç›®ã€‚

ä¸€ä¸ª Threshé¡¹ç›®ç”± å‡ ä¸ªéƒ¨åˆ†æ„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šä¸šåŠ¡ä»£ç ã€threshæ’ä»¶ã€thresh-jsåº“ã€ä¸ Nativeå®¿ä¸»é›†æˆã€‚ä¸‹é¢å°†ä¼šå¯¹ä»£ç åº“ã€ç¯å¢ƒæ¥å…¥ä»¥åŠè°ƒè¯•ä¸€ä¸€åšå‡ºè¯´æ˜ã€‚

#### 2.1ã€ç¯å¢ƒå‡†å¤‡

Android ç«¯ç¯å¢ƒ ï¼šAndroid Studio  iOS ç«¯ï¼šXCode

JSï¼šVSCode + node + npm/yarn

Flutter SDKï¼š**flutter1.9.1-hotfix.6**ã€å¤‡æ³¨ï¼šæ–°ç‰ˆæœ¬åç»­ä¼šé€æ­¥æ”¯æŒ [Flutterç¯å¢ƒå®‰è£…è¯·ç§»æ­¥](https://flutter.dev/docs/get-started/install)ã€‘

#### 2.2ã€ä»“åº“è¯´æ˜

| ä»“åº“åç§°        | åœ°å€                                        | å¼€å‘è¯­è¨€              | å¤‡æ³¨                     |
| --------------- | ------------------------------------------- | --------------------- | ------------------------ |
| thresh          | git@github.com:ymm-tech/thresh.git          | java / oc / dart / js | å®¿ä¸»/native/dart/js-core |
| thresh-template | git@github.com:ymm-tech/thresh-template.git | js                    | JS è„šæ‰‹æ¶æ¨¡æ¿é¡¹ç›®        |
| thresh-cli      | git@github.com:ymm-tech/thresh-cli.git      | js                    | JS è„šæ‰‹æ¶                |

#### 2.3ã€é›†æˆæµç¨‹ä¸è°ƒè¯•

##### 2.3.1ã€ç¯å¢ƒé…ç½®ä¸å‡†å¤‡

```
// 1ã€è¿›å…¥threshæ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¡Œ
# flutter clean
# flutter packages get
# flutter packages upgrade
// 2ã€è¿›å…¥exampleæ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¡Œ
# flutter clean
# flutter packages get
# flutter packages upgrade
# flutter run 
// 3ã€ç¼–è¯‘ã€å®‰è£…æˆåŠŸåï¼Œæ‰‹åŠ¨æ‰“å¼€thresh appï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```

 <img src="https://image.ymm56.com/ymmfile/ps-temporary/1eocdasu0.jpg" alt="Thresh" height="420" width="620"  />     

##### 2.3.2ã€Threshè¿è¡Œæ¨¡å¼ä¸æœ¬åœ°è°ƒè¯•æœåŠ¡

é¦–å…ˆåŠ è½½æœ¬åœ°çš„bundle.jsåŒ…ï¼Œç›´æ¥ç‚¹å‡»å¯åŠ¨æœ¬åœ°bundle æŒ‰é’®ï¼Œå³å¯æ‰“å¼€ä¸Šå›¾demoé¡µé¢ã€‚

###### 2.3.2.1ã€æ‰“å¼€æ²™ç›’æ¨¡å¼

> ```
> æ²™ç›’è°ƒè¯•æ¨¡å¼è¯´æ˜ï¼š
> 1ã€å¯åŠ¨JSæœåŠ¡å™¨ï¼Œç«¯å£å·é»˜è®¤12345 
> 2ã€çœŸæœºè°ƒè¯•é»˜è®¤127.0.0.1åœ°å€æ—¶éœ€è¿ä¸Šç”µè„‘çš„ä»£ç†æˆ–è€…å±€åŸŸç½‘ç¯å¢ƒç›´æ¥è¾“å…¥JSæœåŠ¡å™¨ï¼ˆå³ç”µè„‘ï¼‰çš„IPï¼ˆå¦‚192.168.0.106ï¼‰
> ```

###### 2.3.2.2ã€å¯åŠ¨æœ¬åœ°JSæœåŠ¡å™¨

è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œ

1ã€æ‰§è¡Œ `yarn install`å‘½ä»¤ï¼Œå®‰è£…ä¾èµ–æ–‡ä»¶ï¼›ã€å¦‚å‡ºç°å®‰è£…å¤±è´¥æˆ–å…¶ä»–æŠ¥é”™ï¼Œå¯å°è¯•åˆ é™¤é»˜è®¤yarn.lockæ–‡ä»¶å¹¶é‡æ–°æ‰§è¡Œinstallå‘½ä»¤ã€‘

2ã€æ‰§è¡Œ `yarn dev` å‘½ä»¤å°†ä¼šå¯åŠ¨é¡¹ç›®å¹¶è¿›å…¥æœ¬åœ°å¼€å‘æ¨¡å¼ã€‚

å¼€å‘æ¨¡å¼ä¸‹ä¼šå¯åŠ¨æœ¬åœ° http æœåŠ¡ï¼Œé»˜è®¤æœåŠ¡ç«¯å£ä¸º 12345ï¼Œç«¯å£å·å¯ä»¥åœ¨æ ¹ç›®å½• /webpack/config.js ä¸­ä¿®æ”¹ã€‚å¯¹äº js ç«¯ç›¸å…³é…ç½®ä¸æ‰“åŒ…æ„Ÿå…´è¶£å¯ä»¥å‚è€ƒ **æ‰“åŒ…è¯´æ˜**ã€‚

> **TIP**
>
> ä¸å»ºè®®å¯¹é»˜è®¤ç«¯å£å·è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™ä¹Ÿéœ€è¦åŒæ­¥ä¿®æ”¹è°ƒè¯•å®¿ä¸»å·¥ç¨‹çš„ç›¸åº”ç«¯å£å·ã€‚

é¡¹ç›®å¯åŠ¨åæ— æ³•åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹é¡µé¢ï¼Œéœ€è¦åœ¨è°ƒè¯•å®¿ä¸»å·¥ç¨‹ä¸­è¿›è¡ŒæŸ¥çœ‹ä¸è°ƒè¯•ã€‚

å¦‚éœ€åœ¨å®é™…å®¿ä¸»å·¥ç¨‹ä¸­æ²™ç›’è°ƒè¯•æœ¬åœ°ä»£ç ï¼Œè¯·æ‰§è¡Œ `yarn prod` å‘½ä»¤ï¼Œå°†ä¼šä»¥å¯è¿è¡Œäºå®é™…å®¿ä¸»ä¸­çš„æ–¹å¼å¯åŠ¨æœ¬åœ°å¼€å‘æ¨¡å¼ã€‚ä¸¤ç§å¯åŠ¨å‘½ä»¤å¯¹åº”çš„ process.env.NODE_ENV åˆ†åˆ«ä¸º development å’Œ production.

```javascript
#æ‰“å¼€JSä»£ç ä»“åº“ã€æ¼”ç¤ºç¤ºä¾‹å·¥ç¨‹ä¸ºä¾‹ï¼š dynamic_flutter_demoã€‘ï¼Œå¹¶ä¸”è¿›å…¥æ ¹ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤
#ã€å¤‡æ³¨ï¼šé¦–æ¬¡å®‰è£…æ—¶ï¼Œæœ€å¥½å…ˆæ‰‹åŠ¨åˆ é™¤ä¸‹yarn.lockæ–‡ä»¶å¹¶ä¸”installä¸‹ã€‘ 
ManbangMacBook-Pro:dynamic_flutter_demo Manbang$ yarn install
ManbangMacBook-Pro:dynamic_flutter_demo Manbang$ yarn prod
yarn run v1.22.4
warning package.json: No license field
$ cross-env NODE_ENV=production webpack-dev-server --config webpack/webpack.config.js
â„¹ ï½¢wdsï½£: Project is running at http://0.0.0.0:12345/webpack-dev-server/
â„¹ ï½¢wdsï½£: webpack output is served from /
â„¹ ï½¢wdsï½£: Content not from webpack is served from /Users/Manbang/Documents/YMM/code_flutter/dynamic_flutter_demo/src
â„¹ ï½¢wdmï½£: Hash: 014ee6cacc21626073f2
Version: webpack 4.44.2
Time: 5799ms
Built at: 2020-10-26 3:33:35 PM
                 Asset      Size  Chunks             Chunk Names
/assets/test_image.png  35.6 KiB          [emitted]  
             bundle.js   516 KiB       0  [emitted]  main
Entrypoint main = bundle.js
  [0] ./src/index.ts 1.62 KiB {0} [built]
  [1] ./node_modules/@babel/runtime-corejs3/helpers/interopRequireDefault.js 147 bytes {0} [built]
  [2] ./node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js 64 bytes {0} [built]
  [3] ./node_modules/core-js-pure/stable/instance/concat.js 76 bytes {0} [built]
 [50] ./node_modules/@babel/runtime-corejs3/core-js-stable/instance/for-each.js 66 bytes {0} [built]
 [51] ./node_modules/core-js-pure/stable/instance/for-each.js 529 bytes {0} [built]
 [89] ./node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js 71 bytes {0} [built]
 [90] ./node_modules/core-js-pure/stable/object/define-property.js 83 bytes {0} [built]
 [93] ./node_modules/thresh-js/index.ts 2.49 KiB {0} [built]
 [94] ./node_modules/thresh-js/src/core/dynamicFlutter.ts 19.6 KiB {0} [built]
[164] ./node_modules/thresh-js/src/manager/BridgeManager.ts 9.83 KiB {0} [built]
[202] ./node_modules/thresh-js/src/manager/UtilManager.ts 11 KiB {0} [built]
[203] ./node_modules/thresh-js/src/manager/RenderManager.ts 18.8 KiB {0} [built]
[268] ./src/config.ts 7.24 KiB {0} [built]
[315] ./src/pages/homePage.tsx 7.1 KiB {0} [built]
    + 301 hidden modules
â„¹ ï½¢wdmï½£: Compiled successfully.

#è‡³æ­¤JSæœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼ï¼ï¼
```

###### 2.3.2.3ã€ç‚¹å‡»å¯åŠ¨è°ƒè¯•é¡µé¢

å½“çœ‹åˆ°è·ŸThresh Demos é¡µé¢ä¸”å¦‚ä¸Šå›¾æ‰€ç¤ºå³æˆåŠŸï¼Œå¦‚å‡ºç°æœ¬åœ°æœåŠ¡å™¨ç­‰å¼‚å¸¸ï¼Œåº”è¯¥æ˜¯ä»£ç†æ²¡è¿æˆåŠŸç­‰å…¶ä»–åŸå› ã€‚

###### 2.3.2.4ã€å·¥ç¨‹è°ƒè¯•

1. Hot Reload

   å½“å‰ä¸šåŠ¡å¼€å‘æ¨¡å¼æ”¯æŒhot reloadï¼Œjsæœ‰æ”¹åŠ¨æ—¶ï¼Œå®æ—¶ä¿å­˜åé‡æ–°ç¼–è¯‘ï¼Œåœ¨å®¿ä¸»ä¾§ç‚¹å‡»reloadæŒ‰é’®é‡æ–°åŠ è½½å³å¯ï¼›è°ƒè¯•å·¥å…·æä¾›äº†æ—¥å¿—å·¥å…·ã€é‡æ–°åŠ è½½ç­‰ï¼Œé‡Œé¢è®°å½•äº†å…¨é“¾è·¯æ“ä½œæ—¥å¿—æ–¹ä¾¿å¼€å‘è°ƒè¯•ã€‚

2. JSè°ƒè¯•

   JSç›´æ¥è°ƒè¯•ç›®å‰åªæ”¯æŒ mac + æ¨¡æ‹Ÿå™¨ + safariæµè§ˆå™¨ï¼Œå¦‚ä½•è°ƒè¯•å¯ä»¥å‚è€ƒç½‘ä¸Šçš„æ­¥éª¤ã€‚

#### 2.4ã€åˆ›å»ºé¡¹ç›®å·¥ç¨‹

##### 2.4.1ã€åˆ›å»ºJSé¡¹ç›®å·¥ç¨‹ 

å’Œå¤§éƒ¨åˆ†æ¡†æ¶ä¸€æ ·ï¼ŒThresh çš„ js ç«¯æ¡†æ¶ä¹Ÿæœ‰è‡ªå·±çš„è„šæ‰‹æ¶å·¥å…·ï¼Œé€šè¿‡è„šæ‰‹æ¶å·¥å…·å¯ä»¥ä¾¿æ·å¿«é€Ÿåœ°åˆ›å»ºä¸€ä¸ª Thresh js ä¸šåŠ¡å·¥ç¨‹ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š(ä»¥ yarn ä¸ºä¾‹ï¼Œå¦‚æœªå®‰è£… yarnï¼Œå¯æ›¿æ¢ä¸º npm çš„ç­‰ä»·å‘½ä»¤)

###### 2.4.1.1ã€å…¨å±€å®‰è£…è„šæ‰‹æ¶å·¥å…·

`yarn global add thresh-js-cli`

```
ManbangMacBook-Pro:thresh_test_demo Manbang$ yarn global add thresh-js-cli
yarn global v1.22.4
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Installed "thresh-js-cli@1.0.0" with binaries:
      - thresh-cli
âœ¨  Done in 1.34s.
```

###### 2.4.1.2ã€åˆ›å»ºé¡¹ç›®å·¥ç¨‹

åœ¨ç›®æ ‡ç›®å½•ä¸­æ‰§è¡Œ thresh-cli create yourAppName å‘½ä»¤å³å¯åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œå¦‚ï¼š`thresh-cli create TreshTest1`ï¼Œé¡¹ç›®åˆ›å»ºçš„åŒæ—¶ä¼šè‡ªåŠ¨å®‰è£…ç›¸å…³ä¾èµ–ã€‚

> **TIP**
>
> `thresh-cli create` å‘½ä»¤åˆ›å»ºçš„é¡¹ç›®ï¼Œå…¶é¡¹ç›®åä¼šåŒæ—¶ä½œä¸º package.json ä¸­çš„ name å­—æ®µï¼Œå¹¶ä¸”è¯¥å­—æ®µä¼šä½œä¸ºé¡¹ç›®åœ¨å®¿ä¸»å·¥ç¨‹ä¸­çš„æ¨¡å—åè¢«ä½¿ç”¨ã€‚å› æ­¤å¦‚é¡¹ç›®åä¸æ˜¯æ¨¡å—åï¼Œéœ€è¦è‡ªè¡Œä¿®æ”¹ package.json ä¸­çš„ name å­—æ®µã€‚

```
ManbangMacBook-Pro:thresh_test_demo Manbang$ thresh-cli create ThreshTest1
ä½¿ç”¨ThreshTest1ä½œä¸ºé¡¹ç›®/æ¨¡å—åç§°? (y/N) y
åˆ›å»ºé¡¹ç›®æˆåŠŸ
```

###### 2.4.1.3ã€å¯åŠ¨æœ¬åœ°JSæœåŠ¡å™¨

å†é‡å¤ä¸‹ä¸Šé¢çš„å¯åŠ¨æœ¬åœ°JSæœåŠ¡å™¨æ­¥éª¤å³å¯ï¼Œè‡³æ­¤çœ‹åˆ°æ‰“å¼€JSæœåŠ¡å™¨æˆåŠŸã€‚

##### 2.4.2ã€åˆ›å»ºå®¿ä¸»å·¥ç¨‹

###### 2.4.2.1ã€åˆ›å»ºflutterå·¥ç¨‹

> è‡ªè¡Œåˆ›å»ºflutterå·¥ç¨‹é¡¹ç›®æˆåŠŸåå¹¶é…ç½®yamlæºï¼ŒFlutter ç«¯è¯·åœ¨ pubspec.yaml æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–é¡¹ï¼š

```
thresh: "^1.0.0"
```

```
Androidç«¯å®¿ä¸»ä»£ç é…ç½®
1ã€æ‰“å¼€å·²åˆ›å»ºçš„å·¥ç¨‹
Applicationç±»#onCreateï¼šåˆå§‹åŒ–engine
ThreshFlutter.startInitialization(this);
2ã€åˆ›å»ºThreshDemoActivityå¹¶ç»§æ‰¿ThreshActivity
å®ç°ä»£ç å¯ç›´æ¥å‚è€ƒthreshä»“åº“åˆ†æ”¯çš„exampleé‡Œé¢ä»£ç 

iOSç«¯å®¿ä¸»ä»£ç é…ç½®
1ã€è®¾ç½®userDefaultsä¸­flutterInDebugModeå­—æ®µ
2ã€ç›´æ¥ä½¿ç”¨ThreshViewControlleræˆ–è€…åˆ›å»ºç»§æ‰¿è‡ªThreshViewControllerçš„VCå³å¯
```

###### 2.4.2.2ã€å¯åŠ¨flutter run 

ä¼šå‡ºç°ä»¥ä¸‹ç¤ºä¾‹

â€‹         <img src="https://image.ymm56.com/ymmfile/ps-temporary/1eocdd2i5.jpg" alt="Thresh" height="420" width="420"  />

è‡³æ­¤ï¼Œæ­å–œæ‚¨é¡¹ç›®è¿è¡ŒæˆåŠŸï¼

### ä¸‰ã€æœ¬åœ°è°ƒè¯• - å®¿ä¸»æ²™ç›’è°ƒè¯•æ¨¡å¼

æœ¬åœ°è°ƒè¯•ä»¥ Demo ä½œä¸ºè¯´æ˜ç¤ºä¾‹ã€‚

è¿è¡Œå®¿ä¸» AppDemo å·¥ç¨‹ï¼ˆç›®å‰ä»¥ ThreshDemo é¡¹ç›®ä¸ºå®¿ä¸» demo å·¥ç¨‹ï¼‰ï¼Œå¯åŠ¨åå°†ä¼šç›´æ¥è¿æ¥åˆ° http://127.0.0.1:12345/ åŠ è½½å¹¶æ‰§è¡Œ js è„šæœ¬ï¼Œä»è€Œæ˜¾ç¤º ThreshDemo ä¸­çš„é¡µé¢ã€‚é¡µé¢æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š

å°† ThreshDemo å…‹éš†åˆ°æœ¬åœ°åï¼Œè¿›å…¥æ ¹ç›®å½•ï¼Œä¾æ¬¡æ‰§è¡Œ `yarn install`  `yarn dev` å‘½ä»¤å³å¯å¯åŠ¨ js demo çš„æœ¬åœ°è°ƒè¯•ï¼ŒæœåŠ¡å¯åŠ¨äº http://127.0.0.1:12345/.

ä¾èµ–é¡¹æ·»åŠ å®Œæˆåï¼Œå¯ç›´æ¥å‚è€ƒ **Apis/Flutter** ä¸€æ–‡è¿›è¡Œ Thresh çš„æ¥å…¥ã€‚

### å››ã€è¿›é˜¶æŒ‡å—

* [ä½¿ç”¨Javascriptæ„å»ºFlutteråº”ç”¨ç¨‹åºçš„åŸç†](Documentation/ä½¿ç”¨Javascriptæ„å»ºFlutteråº”ç”¨ç¨‹åºçš„åŸç†.md)

* [åŸºäºNativeçš„ä¸‰ç«¯é€šä¿¡æœºåˆ¶](Documentation/åŸºäºNativeçš„ä¸‰ç«¯é€šä¿¡æœºåˆ¶.md)

* [API-Flutter](Documentation/Apis/Flutter.md)

* [API-JSé€šä¿¡ä¸å·¥å…·](Documentation/Apis/JSé€šä¿¡ä¸å·¥å…·.md)

* [API-JSé¡µé¢æ¸²æŸ“](Documentation/Apis/JSé¡µé¢æ¸²æŸ“.md)

* [API-Native](Documentation/Apis/Native.md)

* [æ‰“åŒ…è¯´æ˜](Documentation/æ‰“åŒ…è¯´æ˜.md)

* [åŸºç¡€ç»„ä»¶](Documentation/åŸºç¡€ç»„ä»¶/ç»„ä»¶è¯´æ˜.md) ä»¥ä¸‹ä¸ºåŸºç¡€ç»„ä»¶æ–‡æ¡£ï¼š

  | [Container](Documentation/åŸºç¡€ç»„ä»¶/Container.md) | [AppBar](Documentation/åŸºç¡€ç»„ä»¶/AppBar.md) | [Page](Documentation/åŸºç¡€ç»„ä»¶/Page.md)            | [Button](Documentation/åŸºç¡€ç»„ä»¶/Button.md) |
  | --------------------------------------- | ----------------------------------------- | ----------------------------------------------------- | --------------------------------- |
  | [Checkbox](Documentation/åŸºç¡€ç»„ä»¶/Checkbox.md) | [Icon](Documentation/åŸºç¡€ç»„ä»¶/Icon.md) | [Image](Documentation/åŸºç¡€ç»„ä»¶/Image.md)          | [Input](Documentation/åŸºç¡€ç»„ä»¶/Input.md) |
  | [ListView](Documentation/åŸºç¡€ç»„ä»¶/ListView.md) | [NativeView](Documentation/åŸºç¡€ç»„ä»¶/NativeView.md) | [NestScrollView](Documentation/åŸºç¡€ç»„ä»¶/NestScrollView.md) | [Radio](Documentation/åŸºç¡€ç»„ä»¶/Radio.md) |
  | [Refresh](Documentation/åŸºç¡€ç»„ä»¶/Refreshmd) | [ScrollView](Documentation/åŸºç¡€ç»„ä»¶/ScrollView.md) | [SwipeActionsView](Documentation/åŸºç¡€ç»„ä»¶/SwipeActionsView.md) | [Text](Documentation/åŸºç¡€ç»„ä»¶/Text.md) |

### äº”ã€æ¥å…¥æ¡ˆä¾‹

ä»¥ä¸‹æ˜¯æœ¬ç«™æ”¶é›†çš„ä½¿ç”¨ Thresh ç¼–å†™çš„åº”ç”¨ï¼Œä¾›å¤§å®¶å‚è§‚å­¦ä¹ ã€‚
å¦‚æœä½ æƒ³æäº¤ä½œå“ï¼Œæˆ–æ˜¯è¦æ±‚ä¿®æ”¹ã€åˆ é™¤è¿™é‡Œåˆ—å‡ºçš„åº”ç”¨ï¼Œè¯·æå‡º [PR](www.ymm56.com)ã€‚

 <img src="https://imagecdn.ymm56.com/ymmfile/ps-temporary/1eqpbmu7c.png" alt="è¿æ»¡æ»¡" style="zoom:67%;" />                                                       <img src="https://imagecdn.ymm56.com/ymmfile/ps-temporary/1eqpbmu7c.png" alt="è¿æ»¡æ»¡" style="zoom:67%;" />

### è¿æ»¡æ»¡å¸æœºç«¯                              è¿æ»¡æ»¡è´§ä¸»ç«¯

æ‰‹æœºé…è´§ç¥å™¨ã€‚                                                     æ‰‹æœºé…è´§ç¥å™¨ã€‚

  - [Android](https://imagecdn.ymm56.com/ymmfile/app-apk-biz/73de2567-2621-4935-855b-afc97d7a8733.apk)                                                       [iOS](https://apps.apple.com/us/app/apple-store/id766046464)  - [Android](https://imagecdn.ymm56.com/ymmfile/app-apk-biz/73de2567-2621-4935-855b-afc97d7a8733.apk)

##### åº”ç”¨æ ¸å¿ƒåœºæ™¯ã€æ€»æ—¥å‡PVè¶…åƒä¸‡ï¼Œjsé”™è¯¯ç‡ä½äºåä¸‡åˆ†ä¹‹ä¸€ã€‘

  <img src="https://imagecdn.ymm56.com/ymmfile/ps-temporary/1eqpbmu46.png" alt="Thresh" style="zoom: 50%;" />

### å…­ã€è”ç³»æˆ‘ä»¬

å¦‚æœä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œæˆ–è€…æœ‰å¥½çš„å»ºè®®ï¼Œæ¬¢è¿ç»™æˆ‘ä»¬æã€‚è¯¦ç»†è¯´æ˜è¯·ç§»æ­¥ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)

å¯¹Threshæœ‰å…´è¶£çš„å°ä¼™ä¼´ï¼Œå¯ä»¥åŠ ç¾¤äº¤æµ é’‰é’‰ç¾¤ï¼š

â€‹    <img src="https://imagecdn.ymm56.com/ymmfile/ps-temporary/1eqpbmu7e.jpg" alt="Thresh" height="300" width="240" />

### ä¸ƒã€é¡¹ç›®ä½œè€…

* å¾ç»´é¡º - æ ¸å¿ƒå¼€å‘è€… - [SeaShrimper](https://github.com/SeaShrimper)
* å¾äº® - æ ¸å¿ƒå¼€å‘è€… - [TroyXL](https://github.com/TroyXL)
* ç« ä¼Ÿ - æ ¸å¿ƒå¼€å‘è€… - [snowfall]( https://github.com/snowfall)
* æ±¤é–å’š - æ ¸å¿ƒå¼€å‘è€… - [JD-Tang](https://github.com/JD-Tang)
* èŒ†ä¿Šé¾™ - ä¸»è¦è´¡çŒ®è€… - [maojunlong](https://github.com/maojunlong)

### å…«ã€å¼€æºåè®®

Threshéµå¾ª[MIT](https://opensource.org/licenses/MIT)å¼€æºè®¸å¯è¯åè®®ã€‚

### ä¹ã€è‡´è°¢

å‚è€ƒä»¥åŠä½¿ç”¨çš„å¼€æºé¡¹ç›®

| é¡¹ç›®åç§°                                                | å¼€æºåè®®                                                     | è¯´æ˜              |
| ------------------------------------------------------- | ------------------------------------------------------------ | ----------------- |
| [Flutter][https://github.com/flutter/flutter.git]       | [MIT](http://opensource.org/licenses/MIT)                    | dart sdk engineç­‰ |
| [Maven][6]                                              | [Apache License](https://github.com/apache/maven/blob/master/LICENSE) | ä¾èµ–åº“            |
| [ReactNative][https://github.com/facebook/react-native] | [MIT](http://opensource.org/licenses/MIT)                    | jscåŠ è½½ç­‰         |
| [J2V8][https://github.com/eclipsesource/J2V8.git]       | [Eclipse Public License - v 1.0](https://www.eclipse.org/legal/epl-v10.html) | Android v8        |
